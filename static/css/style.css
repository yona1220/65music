/* base */
* { box-sizing: border-box; }
html, body { margin: 0; }
body {
  /* padding: 16px; */
  color: #222;
  font-size: 16px;
}

/* layout */
#main{
  display:flex;
  gap:10px;
  align-items:flex-start;
  padding:10px;
}
@media (max-width: 1000px){
  #main{ flex-direction:column; }
}

/* player area */
#playerArea{ width:640px; max-width:100%; min-width:320px; }
#playerPlaceholder{
  width:100%;
  background:#000; color:#fff;
  height:360px;
  display:flex; align-items:center; justify-content:center;
}
#playerWrap{ width:100%; height:390px; display:none; }
#player{ width:100%; height:100%; aspect-ratio:16/9; }

/* sidebar */
#sidebar{ flex:1; min-width:360px; }
#searchInput{
  width:100%;
  padding:8px;
  margin-bottom:8px;
  border-radius:6px;
  border:1px solid #ccc;
}
#filterSelect{
  width:170px;
  padding:8px;
  border-radius:6px;
  border:1px solid #ccc;
}
#yearSelect{
  width:140px;
  padding:8px;
  border-radius:6px;
  border:1px solid #ccc;
  margin-left:8px;
}

/* count */
#countArea{ margin:6px 0 8px; font-size:14px; }

/* list wrapper */
#listWrapper{ display:flex; flex-direction:column; gap:6px; }

/* ▼ 横スクロール（リスト＆ヘッダー） */
#listHeaderWrapper,
#videoListContainer{
  overflow-x:auto;
  scrollbar-width:thin; /* Firefox */
  -webkit-overflow-scrolling: touch;
}
#listHeaderWrapper::-webkit-scrollbar,
#videoListContainer::-webkit-scrollbar{ height:8px; }

/* ▼ listHeaderWrapper だけスクロールバー非表示 */
#listHeaderWrapper{
  -ms-overflow-style:none;  /* IE/Edge */
  scrollbar-width:none;     /* Firefox */
  background:#f2f2f2;
  border-radius:6px;
}
#listHeaderWrapper::-webkit-scrollbar,
#videoListContainer::-webkit-scrollbar{ display:none; }

/* header */
#listHeader{
  display:flex;
  min-width:1200px;
  background:transparent;
  padding:8px;
  border-radius:6px;
  align-items:center;
  gap:10px;
}

/* columns */
.thumbHeader{ flex:0 0 150px; }

.col{
  flex:0 0 220px;
  white-space:normal;
  overflow:hidden;
  display:-webkit-box;
  -webkit-box-orient:vertical;
  -webkit-line-clamp:4;
  line-clamp:4;
}

/* ソートマーク */
.headerCol{ cursor:pointer; position:relative; font-weight:bold; }
.headerCol.sort-default::after{
  content:"";
  position:absolute;
  right:4px; top:50%; transform:translateY(-50%);
  border-left:6px solid transparent;
  border-right:6px solid transparent;
  border-top:8px solid #fff;
  filter: drop-shadow(0 0 1px #333);
}
.headerCol.sort-asc::after{
  content:"";
  position:absolute;
  right:4px; top:50%; transform:translateY(-60%);
  border-left:6px solid transparent;
  border-right:6px solid transparent;
  border-bottom:8px solid #000;
}
.headerCol.sort-desc::after{
  content:"";
  position:absolute;
  right:4px; top:50%; transform:translateY(-40%);
  border-left:6px solid transparent;
  border-right:6px solid transparent;
  border-top:8px solid #000;
}

/* list rows */
#videoListContainer{ max-height:520px; overflow-y:auto; }
#videoList{ width:100%; } /* PC */

.videoItem{
  display:flex;
  min-width:1200px;
  gap:10px;
  padding:5px 0;
  border-bottom:1px solid #eee;
}
.videoItem:hover{ background:#fafafa; }

/* 再生中行ハイライト（これだけが “グレーになる” 条件） */
.videoItem.is-playing{ background:#e6e6e6; }
.videoItem.is-playing:hover{ background:#e0e0e0; }

/* iOSのタップ時ハイライトを消す（スクロールでもグレーになる問題の主犯） */
.videoItem, .videoItem *{
  -webkit-tap-highlight-color: transparent;
}

/* サムネ */
.thumbWrapper{
  flex:0 0 150px;
  display:flex;
  flex-direction:column;
  align-items:center;
}
.thumb{
  width:142px;
  height:79px;
  object-fit:cover;
  border-radius:6px;
}
.date{ font-size:12px; color:#555; }

/* 各列ごとに幅 */
.col-song     { flex:0 0 150px; white-space: pre-line; }
.col-singer   { flex:0 0 150px; }
.col-artist   { flex:0 0 150px; }
.col-composer { flex:0 0 150px; }

/* 引用 */
.col-title    { flex:1 1 auto; min-width:320px; }

/* リンク */
.col a{ color:#0066cc; text-decoration:underline; }
.col.nolink{ text-decoration:none; color:#222; }

/* 長文が列を押し広げて“余白スクロール”を生まないように */
.col, .col a{
  overflow-wrap:anywhere;
  word-break:break-word;
}

/* tooltip */
#tooltip{
  position:fixed;
  z-index:9999;
  background:rgba(0,0,0,0.85);
  color:#fff;
  padding:6px 10px;
  border-radius:6px;
  font-size:14px;
  max-width:10vw;
  line-height:1.4;
  display:none;
  white-space:normal;
}
@media (max-width: 1000px){
  #tooltip{ max-width:50vw; }
}

/* left column */
#leftColumn{ width:50%; height:100%; }
@media (max-width: 1000px){
  #leftColumn{ width:100%; height:100%; }
}

/* header bar */
#header{
  display:flex;
  height:56px;
  padding:0;
  background-color:#198caa;
}
.header_title{
  padding:10px;
  color:#fff;
  font-weight:bold;
  font-size:32px;
}

details[open] summary{
  border-bottom:1px solid #aaaaaa;
  margin-bottom:0.5em;
}

/* ▼ スマホ：見た目縮小 */
@media (max-width: 1000px){
  #listHeader, #videoListContainer, .videoItem, .col, .headerCol{
    font-size:13px !important;
    line-height:1.2;
  }
  .videoItem{ padding:4px 2px !important; gap:6px !important; }
  #listHeader{ padding:6px !important; gap:6px !important; }

  .thumbWrapper{ flex:0 0 110px !important; }
  .thumb{ width:110px !important; height:62px !important; }

  .col-song     { flex:0 0 130px !important; }
  .col-singer   { flex:0 0 120px !important; }
  .col-artist   { flex:0 0 130px !important; }
  .col-composer { flex:0 0 110px !important; }

  .col-title{
    flex:0 0 clamp(220px, 55vw, 320px) !important;
    min-width:0 !important;
  }
  .thumbHeader{ flex:0 0 110px !important; }
}

/* ▼ スマホ：余白スクロール撲滅（min-width固定を殺して「中身幅＝スクロール幅」にする） */
@media (max-width: 1000px){
  /* ページ全体の横スクは殺す（内側だけ許可） */
  html, body{ overflow-x:clip; }
  #main{ overflow-x:hidden; }

  #sidebar, #listWrapper, #listHeaderWrapper, #videoListContainer{
    min-width:0;
    width:100%;
    max-width:100%;
  }

  /* ヘッダ/行/親を “実寸にシュリンク” させる */
  #listHeader{
    min-width:0 !important;
    display:inline-flex;
    width:max-content;
  }
  #videoList{
    display:flex;
    flex-direction:column;
    align-items:flex-start;
    width:max-content;
  }
  .videoItem{
    min-width:0 !important;
    display:inline-flex;
    width:max-content;
  }

  /* バウンスで「奥に行ける感」を減らす（効く環境だけ） */
  #listHeaderWrapper, #videoListContainer{
    overscroll-behavior-x: contain;
  }
}
